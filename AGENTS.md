# AGENTS.md

## 主要任务

- 利用 `moviepy`（版本 >= 2.0.0）和 `PyAV` 编写脚本。
- 使用图片、音频、视频等素材自动生成最终视频。
- 支持图片轮播、音频配合、视频合成等多种场景。
- 兼容新版 `moviepy` API，确保脚本可在 2.x 及以上版本运行。
- 自动检测素材时长，智能分配图片展示时间，保证视频与音频时长一致。
- 支持过渡效果（如淡入淡出）、分辨率调整、素材循环等功能。
- 使用 `PyAV` 库进行音频分析和处理，替代命令行 `ffmpeg` 调用。

## 依赖说明

- `moviepy` 版本要求：`>=2.0.0`
- `av` (PyAV) 版本要求：`>=10.0.0`
- MoviePy 内部仍依赖 `ffmpeg` 进行视频编码，但音频分析已改用 PyAV Python 库

## 典型流程

1. 收集图片、音频、视频等素材。
2. 脚本自动检测音频时长，计算图片轮播数量与展示时长。
3. 合成视频，添加过渡效果与音频。
4. 输出最终视频文件。

---

如需扩展功能或适配更多场景，可在脚本基础上进一步开发。
